const e=document.getElementById("image-selection"),t=document.getElementById("logged-in-users"),n=document.getElementById("create-account-button"),o=document.getElementById("submit-button"),s=document.getElementById("username"),a=document.getElementById("password"),l=document.getElementById("form"),d=document.createElement("p"),r=document.createElement("h1"),c=document.createElement("h1"),i=document.createElement("input"),u=document.createElement("li"),y=document.getElementById("body"),m=document.createElement("h1"),p=document.createElement("div");const h=document.createElement("div");h.style.display="flex",h.style.justifyContent="center";const w="https://social-media-68d76-default-rtdb.europe-west1.firebasedatabase.app/";async function g(){try{const e=await fetch(`${w}users.json`);if(!e.ok)throw new Error(`Error: ${e.status} ${e.statusText}`);const t=await e.json();if(!t)return[];return Object.values(t)}catch(e){throw new Error("Failed to fetch users")}}async function f(e){await g();const t=`${w}users/${e.userName}.json`,n={method:"PUT",body:JSON.stringify(e),headers:{"Content-type":"application/json; charset=UTF-8"}};try{const e=await fetch(t,n);if(!e.ok)throw new Error(`Error: ${e.status} ${e.statusText}`)}catch(e){throw console.log(e),new Error("Failed to save user information.")}}function C(e){if(t){t.innerHTML="";for(const n of e)if(!n.newUser){const e=document.createElement("li");e.textContent=`${n.userName} - Status: ${n.status}`;const o=document.createElement("img");o.src=n.imageurl,o.style.width="50px",o.style.height="50px",e.appendChild(o),t.appendChild(e),e.addEventListener("click",(()=>{document.body.innerHTML="",l.style.display="none";const e=document.createElement("div");e.innerHTML=`<h1>Welcome to ${n.userName}'s page! </br> Status: ${n.status}</h1>`,document.body.appendChild(e);const o=document.createElement("img");o.src=n.imageurl,o.style.width="50px",o.style.height="50px",o.style.alignItems="center",e.appendChild(o);const s=document.createElement("button");s.textContent="Log Out",s.style.textAlign="center",s.style.margin="10px",document.body.appendChild(s),s.addEventListener("click",(function(){i.style.display="none",p.innerHTML="",s.style.display="none",r.textContent=" ",l.style.display="block",a.value="",d.textContent=" ",p.style.display="none",t.style.display="none",window.location.reload()}))}))}}else console.error("Logged-in users list element not found.")}e?e.addEventListener("change",(()=>{const t=e.value;e.value=t})):console.error("Image dropdown element not found."),n&&s&&a?n.addEventListener("click",(async()=>{r.textContent=" ",d.innerText=" ";const t=s.value,o=a.value;if(!t||!o)return d.textContent="Username and / or password cannot be empty.",d.style.color="red",void n.insertAdjacentElement("afterend",d);if(!await async function(e){return!(await g()).some((t=>t.userName===e))}(t))return d.textContent="Username is already taken. Please choose another one.",d.style.color="red",void n.insertAdjacentElement("afterend",d);y.appendChild(m),m.textContent="Your account has been successfully created! You may now log in with your new account.";const l={userName:t,password:o,status:"",imageurl:e?.value??"",newUser:!0};await f(l)})):console.error("One or more DOM elements not found."),o&&s&&a?o.addEventListener("click",(async e=>{e.preventDefault(),m.textContent=" ",r.textContent=" ",document.body.style.alignContent="center",d.textContent=" ";const n=a.value,o=await g(),y=o.find((e=>e.userName===s.value));if(d.textContent="Log In Successfull! ",!y)return d.textContent="No account found for this user. Please create an account first.",d.style.color="red",void l?.appendChild(d);if(y.password!==n)return d.textContent="Incorrect password. Please try again.",d.style.color="red",void l?.appendChild(d);if(!t)return void console.error("Logged-in users list element not found.");t.innerHTML="";for(const e of o)e.newUser||(document.body.innerHTML="",u.addEventListener("click",(()=>{document.body.innerHTML="",l.style.display="none";const n=document.createElement("div");n.innerHTML=`<h1>Welcome to ${e.userName}'s page! </br> Status: ${e.status}</h1>`,document.body.appendChild(n),document.body.style.alignContent="center";const o=document.createElement("img");o.src=e.imageurl,o.style.width="50px",o.style.height="50px",n.appendChild(o);const s=document.createElement("button");s.textContent="Log Out",document.body.appendChild(s),s.addEventListener("click",(function(){i.style.display="none",p.innerHTML="",s.style.display="none",r.textContent=" ",l.style.display="block",a.value="",d.textContent=" ",p.style.display="none",t.style.display="none",window.location.reload()}))})));y.newUser=!1,await f(y),C(await g()),l.style.display="none",p.innerHTML=`<h1>Welcome ${s.value}!</h1> `,p.style.textAlign="center",document.body.appendChild(p),p.appendChild(t),t.style.display="block",i.style.display="block",i.value="",i.id="status",document.body.appendChild(i),i.style.width="100px";const E=document.createElement("button");E.innerText="Send statusmessage! ",E.style.width="120px",E.style.textAlign="center",E.style.margin="10px",h.appendChild(E),document.body.appendChild(h);const x=document.createElement("button");x.innerText="Delete User",x.style.textAlign="center",x.style.margin="10px",x.style.width="120px",h.appendChild(x),document.body.appendChild(h),x?.addEventListener("click",(async e=>{e?.preventDefault(),u.textContent=" ",s?(await async function(e){console.log("Deleting user");const n=`${w}users/${e}.json`,o={method:"DELETE",headers:{"Content-type":"application/json; charset=UTF-8"}};try{const e=await fetch(n,o);if(!e.ok)throw new Error(`Error: ${e.status} ${e.statusText}`);console.log("User deleted successfully"),r.textContent="User deleted successfully!",document.body.appendChild(r),C(await g()),i.style.display="none",p.innerHTML="",E.style.display="none",b.style.display="none",x.style.display="none",r.textContent=" ",l.style.display="block",a.value="",d.textContent=" ",p.style.display="none",t.style.display="none"}catch(e){throw console.log(e),c.textContent="Failed to delete user. Please try again.",document.body.appendChild(c),new Error("Failed to delete user.")}}(s.value),d.textContent=" "):console.error("Username input element not found.")})),E.addEventListener("click",(async()=>{const e=i.value,t=`${w}users/${y.userName}/status.json`,n={method:"PUT",body:JSON.stringify(e),headers:{"Content-type":"application/json; charset=UTF-8"}};try{const e=await fetch(t,n);if(!e.ok)throw new Error(`Error: ${e.status} ${e.statusText}`)}catch(e){throw console.log(e),new Error("Failed to save user information.")}C(await g()),i.value=""}));const b=document.createElement("button");b.textContent="Log Out",b.style.textAlign="center",b.style.margin="10px",b.style.width="80px",h.appendChild(b),document.body.appendChild(h),b.addEventListener("click",(function(){i.style.display="none",p.innerHTML="",E.style.display="none",b.style.display="none",x.style.display="none",r.textContent=" ",l.style.display="block",a.value="",d.textContent=" ",p.style.display="none",t.style.display="none",window.location.reload()}))})):console.error("One or more DOM elements not found.");
//# sourceMappingURL=index.50ee0eea.js.map
